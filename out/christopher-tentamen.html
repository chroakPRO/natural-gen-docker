<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>Contanisering av applikationer &lpar;Christopher Ek&rpar;</title>
        <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

/* From extension vscode.markdown-math */
@font-face{font-family:KaTeX_AMS;font-style:normal;font-weight:400;src:url(fonts/KaTeX_AMS-Regular.woff2) format("woff2"),url(fonts/KaTeX_AMS-Regular.woff) format("woff"),url(fonts/KaTeX_AMS-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Caligraphic-Bold.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Bold.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Caligraphic-Regular.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Regular.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Fraktur-Bold.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Bold.woff) format("woff"),url(fonts/KaTeX_Fraktur-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Fraktur-Regular.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Regular.woff) format("woff"),url(fonts/KaTeX_Fraktur-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Main-Bold.woff2) format("woff2"),url(fonts/KaTeX_Main-Bold.woff) format("woff"),url(fonts/KaTeX_Main-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Main-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Main-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Main-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Main-Italic.woff2) format("woff2"),url(fonts/KaTeX_Main-Italic.woff) format("woff"),url(fonts/KaTeX_Main-Italic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Main-Regular.woff2) format("woff2"),url(fonts/KaTeX_Main-Regular.woff) format("woff"),url(fonts/KaTeX_Main-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Math-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Math-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Math-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Math-Italic.woff2) format("woff2"),url(fonts/KaTeX_Math-Italic.woff) format("woff"),url(fonts/KaTeX_Math-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:700;src:url(fonts/KaTeX_SansSerif-Bold.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Bold.woff) format("woff"),url(fonts/KaTeX_SansSerif-Bold.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:italic;font-weight:400;src:url(fonts/KaTeX_SansSerif-Italic.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Italic.woff) format("woff"),url(fonts/KaTeX_SansSerif-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:400;src:url(fonts/KaTeX_SansSerif-Regular.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Regular.woff) format("woff"),url(fonts/KaTeX_SansSerif-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Script;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Script-Regular.woff2) format("woff2"),url(fonts/KaTeX_Script-Regular.woff) format("woff"),url(fonts/KaTeX_Script-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size1;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size1-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size1-Regular.woff) format("woff"),url(fonts/KaTeX_Size1-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size2;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size2-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size2-Regular.woff) format("woff"),url(fonts/KaTeX_Size2-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size3;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size3-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size3-Regular.woff) format("woff"),url(fonts/KaTeX_Size3-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size4;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size4-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size4-Regular.woff) format("woff"),url(fonts/KaTeX_Size4-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Typewriter;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Typewriter-Regular.woff2) format("woff2"),url(fonts/KaTeX_Typewriter-Regular.woff) format("woff"),url(fonts/KaTeX_Typewriter-Regular.ttf) format("truetype")}.katex{text-rendering:auto;font:normal 1.21em KaTeX_Main,Times New Roman,serif;line-height:1.2;text-indent:0}.katex *{-ms-high-contrast-adjust:none!important;border-color:currentColor}.katex .katex-version:after{content:"0.13.24"}.katex .katex-mathml{clip:rect(1px,1px,1px,1px);border:0;height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.katex .katex-html>.newline{display:block}.katex .base{position:relative;white-space:nowrap;width:-webkit-min-content;width:-moz-min-content;width:min-content}.katex .base,.katex .strut{display:inline-block}.katex .textbf{font-weight:700}.katex .textit{font-style:italic}.katex .textrm{font-family:KaTeX_Main}.katex .textsf{font-family:KaTeX_SansSerif}.katex .texttt{font-family:KaTeX_Typewriter}.katex .mathnormal{font-family:KaTeX_Math;font-style:italic}.katex .mathit{font-family:KaTeX_Main;font-style:italic}.katex .mathrm{font-style:normal}.katex .mathbf{font-family:KaTeX_Main;font-weight:700}.katex .boldsymbol{font-family:KaTeX_Math;font-style:italic;font-weight:700}.katex .amsrm,.katex .mathbb,.katex .textbb{font-family:KaTeX_AMS}.katex .mathcal{font-family:KaTeX_Caligraphic}.katex .mathfrak,.katex .textfrak{font-family:KaTeX_Fraktur}.katex .mathtt{font-family:KaTeX_Typewriter}.katex .mathscr,.katex .textscr{font-family:KaTeX_Script}.katex .mathsf,.katex .textsf{font-family:KaTeX_SansSerif}.katex .mathboldsf,.katex .textboldsf{font-family:KaTeX_SansSerif;font-weight:700}.katex .mathitsf,.katex .textitsf{font-family:KaTeX_SansSerif;font-style:italic}.katex .mainrm{font-family:KaTeX_Main;font-style:normal}.katex .vlist-t{border-collapse:collapse;display:inline-table;table-layout:fixed}.katex .vlist-r{display:table-row}.katex .vlist{display:table-cell;position:relative;vertical-align:bottom}.katex .vlist>span{display:block;height:0;position:relative}.katex .vlist>span>span{display:inline-block}.katex .vlist>span>.pstrut{overflow:hidden;width:0}.katex .vlist-t2{margin-right:-2px}.katex .vlist-s{display:table-cell;font-size:1px;min-width:2px;vertical-align:bottom;width:2px}.katex .vbox{align-items:baseline;display:inline-flex;flex-direction:column}.katex .hbox{width:100%}.katex .hbox,.katex .thinbox{display:inline-flex;flex-direction:row}.katex .thinbox{max-width:0;width:0}.katex .msupsub{text-align:left}.katex .mfrac>span>span{text-align:center}.katex .mfrac .frac-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline,.katex .hline,.katex .mfrac .frac-line,.katex .overline .overline-line,.katex .rule,.katex .underline .underline-line{min-height:1px}.katex .mspace{display:inline-block}.katex .clap,.katex .llap,.katex .rlap{position:relative;width:0}.katex .clap>.inner,.katex .llap>.inner,.katex .rlap>.inner{position:absolute}.katex .clap>.fix,.katex .llap>.fix,.katex .rlap>.fix{display:inline-block}.katex .llap>.inner{right:0}.katex .clap>.inner,.katex .rlap>.inner{left:0}.katex .clap>.inner>span{margin-left:-50%;margin-right:50%}.katex .rule{border:0 solid;display:inline-block;position:relative}.katex .hline,.katex .overline .overline-line,.katex .underline .underline-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline{border-bottom-style:dashed;display:inline-block;width:100%}.katex .sqrt>.root{margin-left:.27777778em;margin-right:-.55555556em}.katex .fontsize-ensurer.reset-size1.size1,.katex .sizing.reset-size1.size1{font-size:1em}.katex .fontsize-ensurer.reset-size1.size2,.katex .sizing.reset-size1.size2{font-size:1.2em}.katex .fontsize-ensurer.reset-size1.size3,.katex .sizing.reset-size1.size3{font-size:1.4em}.katex .fontsize-ensurer.reset-size1.size4,.katex .sizing.reset-size1.size4{font-size:1.6em}.katex .fontsize-ensurer.reset-size1.size5,.katex .sizing.reset-size1.size5{font-size:1.8em}.katex .fontsize-ensurer.reset-size1.size6,.katex .sizing.reset-size1.size6{font-size:2em}.katex .fontsize-ensurer.reset-size1.size7,.katex .sizing.reset-size1.size7{font-size:2.4em}.katex .fontsize-ensurer.reset-size1.size8,.katex .sizing.reset-size1.size8{font-size:2.88em}.katex .fontsize-ensurer.reset-size1.size9,.katex .sizing.reset-size1.size9{font-size:3.456em}.katex .fontsize-ensurer.reset-size1.size10,.katex .sizing.reset-size1.size10{font-size:4.148em}.katex .fontsize-ensurer.reset-size1.size11,.katex .sizing.reset-size1.size11{font-size:4.976em}.katex .fontsize-ensurer.reset-size2.size1,.katex .sizing.reset-size2.size1{font-size:.83333333em}.katex .fontsize-ensurer.reset-size2.size2,.katex .sizing.reset-size2.size2{font-size:1em}.katex .fontsize-ensurer.reset-size2.size3,.katex .sizing.reset-size2.size3{font-size:1.16666667em}.katex .fontsize-ensurer.reset-size2.size4,.katex .sizing.reset-size2.size4{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size2.size5,.katex .sizing.reset-size2.size5{font-size:1.5em}.katex .fontsize-ensurer.reset-size2.size6,.katex .sizing.reset-size2.size6{font-size:1.66666667em}.katex .fontsize-ensurer.reset-size2.size7,.katex .sizing.reset-size2.size7{font-size:2em}.katex .fontsize-ensurer.reset-size2.size8,.katex .sizing.reset-size2.size8{font-size:2.4em}.katex .fontsize-ensurer.reset-size2.size9,.katex .sizing.reset-size2.size9{font-size:2.88em}.katex .fontsize-ensurer.reset-size2.size10,.katex .sizing.reset-size2.size10{font-size:3.45666667em}.katex .fontsize-ensurer.reset-size2.size11,.katex .sizing.reset-size2.size11{font-size:4.14666667em}.katex .fontsize-ensurer.reset-size3.size1,.katex .sizing.reset-size3.size1{font-size:.71428571em}.katex .fontsize-ensurer.reset-size3.size2,.katex .sizing.reset-size3.size2{font-size:.85714286em}.katex .fontsize-ensurer.reset-size3.size3,.katex .sizing.reset-size3.size3{font-size:1em}.katex .fontsize-ensurer.reset-size3.size4,.katex .sizing.reset-size3.size4{font-size:1.14285714em}.katex .fontsize-ensurer.reset-size3.size5,.katex .sizing.reset-size3.size5{font-size:1.28571429em}.katex .fontsize-ensurer.reset-size3.size6,.katex .sizing.reset-size3.size6{font-size:1.42857143em}.katex .fontsize-ensurer.reset-size3.size7,.katex .sizing.reset-size3.size7{font-size:1.71428571em}.katex .fontsize-ensurer.reset-size3.size8,.katex .sizing.reset-size3.size8{font-size:2.05714286em}.katex .fontsize-ensurer.reset-size3.size9,.katex .sizing.reset-size3.size9{font-size:2.46857143em}.katex .fontsize-ensurer.reset-size3.size10,.katex .sizing.reset-size3.size10{font-size:2.96285714em}.katex .fontsize-ensurer.reset-size3.size11,.katex .sizing.reset-size3.size11{font-size:3.55428571em}.katex .fontsize-ensurer.reset-size4.size1,.katex .sizing.reset-size4.size1{font-size:.625em}.katex .fontsize-ensurer.reset-size4.size2,.katex .sizing.reset-size4.size2{font-size:.75em}.katex .fontsize-ensurer.reset-size4.size3,.katex .sizing.reset-size4.size3{font-size:.875em}.katex .fontsize-ensurer.reset-size4.size4,.katex .sizing.reset-size4.size4{font-size:1em}.katex .fontsize-ensurer.reset-size4.size5,.katex .sizing.reset-size4.size5{font-size:1.125em}.katex .fontsize-ensurer.reset-size4.size6,.katex .sizing.reset-size4.size6{font-size:1.25em}.katex .fontsize-ensurer.reset-size4.size7,.katex .sizing.reset-size4.size7{font-size:1.5em}.katex .fontsize-ensurer.reset-size4.size8,.katex .sizing.reset-size4.size8{font-size:1.8em}.katex .fontsize-ensurer.reset-size4.size9,.katex .sizing.reset-size4.size9{font-size:2.16em}.katex .fontsize-ensurer.reset-size4.size10,.katex .sizing.reset-size4.size10{font-size:2.5925em}.katex .fontsize-ensurer.reset-size4.size11,.katex .sizing.reset-size4.size11{font-size:3.11em}.katex .fontsize-ensurer.reset-size5.size1,.katex .sizing.reset-size5.size1{font-size:.55555556em}.katex .fontsize-ensurer.reset-size5.size2,.katex .sizing.reset-size5.size2{font-size:.66666667em}.katex .fontsize-ensurer.reset-size5.size3,.katex .sizing.reset-size5.size3{font-size:.77777778em}.katex .fontsize-ensurer.reset-size5.size4,.katex .sizing.reset-size5.size4{font-size:.88888889em}.katex .fontsize-ensurer.reset-size5.size5,.katex .sizing.reset-size5.size5{font-size:1em}.katex .fontsize-ensurer.reset-size5.size6,.katex .sizing.reset-size5.size6{font-size:1.11111111em}.katex .fontsize-ensurer.reset-size5.size7,.katex .sizing.reset-size5.size7{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size5.size8,.katex .sizing.reset-size5.size8{font-size:1.6em}.katex .fontsize-ensurer.reset-size5.size9,.katex .sizing.reset-size5.size9{font-size:1.92em}.katex .fontsize-ensurer.reset-size5.size10,.katex .sizing.reset-size5.size10{font-size:2.30444444em}.katex .fontsize-ensurer.reset-size5.size11,.katex .sizing.reset-size5.size11{font-size:2.76444444em}.katex .fontsize-ensurer.reset-size6.size1,.katex .sizing.reset-size6.size1{font-size:.5em}.katex .fontsize-ensurer.reset-size6.size2,.katex .sizing.reset-size6.size2{font-size:.6em}.katex .fontsize-ensurer.reset-size6.size3,.katex .sizing.reset-size6.size3{font-size:.7em}.katex .fontsize-ensurer.reset-size6.size4,.katex .sizing.reset-size6.size4{font-size:.8em}.katex .fontsize-ensurer.reset-size6.size5,.katex .sizing.reset-size6.size5{font-size:.9em}.katex .fontsize-ensurer.reset-size6.size6,.katex .sizing.reset-size6.size6{font-size:1em}.katex .fontsize-ensurer.reset-size6.size7,.katex .sizing.reset-size6.size7{font-size:1.2em}.katex .fontsize-ensurer.reset-size6.size8,.katex .sizing.reset-size6.size8{font-size:1.44em}.katex .fontsize-ensurer.reset-size6.size9,.katex .sizing.reset-size6.size9{font-size:1.728em}.katex .fontsize-ensurer.reset-size6.size10,.katex .sizing.reset-size6.size10{font-size:2.074em}.katex .fontsize-ensurer.reset-size6.size11,.katex .sizing.reset-size6.size11{font-size:2.488em}.katex .fontsize-ensurer.reset-size7.size1,.katex .sizing.reset-size7.size1{font-size:.41666667em}.katex .fontsize-ensurer.reset-size7.size2,.katex .sizing.reset-size7.size2{font-size:.5em}.katex .fontsize-ensurer.reset-size7.size3,.katex .sizing.reset-size7.size3{font-size:.58333333em}.katex .fontsize-ensurer.reset-size7.size4,.katex .sizing.reset-size7.size4{font-size:.66666667em}.katex .fontsize-ensurer.reset-size7.size5,.katex .sizing.reset-size7.size5{font-size:.75em}.katex .fontsize-ensurer.reset-size7.size6,.katex .sizing.reset-size7.size6{font-size:.83333333em}.katex .fontsize-ensurer.reset-size7.size7,.katex .sizing.reset-size7.size7{font-size:1em}.katex .fontsize-ensurer.reset-size7.size8,.katex .sizing.reset-size7.size8{font-size:1.2em}.katex .fontsize-ensurer.reset-size7.size9,.katex .sizing.reset-size7.size9{font-size:1.44em}.katex .fontsize-ensurer.reset-size7.size10,.katex .sizing.reset-size7.size10{font-size:1.72833333em}.katex .fontsize-ensurer.reset-size7.size11,.katex .sizing.reset-size7.size11{font-size:2.07333333em}.katex .fontsize-ensurer.reset-size8.size1,.katex .sizing.reset-size8.size1{font-size:.34722222em}.katex .fontsize-ensurer.reset-size8.size2,.katex .sizing.reset-size8.size2{font-size:.41666667em}.katex .fontsize-ensurer.reset-size8.size3,.katex .sizing.reset-size8.size3{font-size:.48611111em}.katex .fontsize-ensurer.reset-size8.size4,.katex .sizing.reset-size8.size4{font-size:.55555556em}.katex .fontsize-ensurer.reset-size8.size5,.katex .sizing.reset-size8.size5{font-size:.625em}.katex .fontsize-ensurer.reset-size8.size6,.katex .sizing.reset-size8.size6{font-size:.69444444em}.katex .fontsize-ensurer.reset-size8.size7,.katex .sizing.reset-size8.size7{font-size:.83333333em}.katex .fontsize-ensurer.reset-size8.size8,.katex .sizing.reset-size8.size8{font-size:1em}.katex .fontsize-ensurer.reset-size8.size9,.katex .sizing.reset-size8.size9{font-size:1.2em}.katex .fontsize-ensurer.reset-size8.size10,.katex .sizing.reset-size8.size10{font-size:1.44027778em}.katex .fontsize-ensurer.reset-size8.size11,.katex .sizing.reset-size8.size11{font-size:1.72777778em}.katex .fontsize-ensurer.reset-size9.size1,.katex .sizing.reset-size9.size1{font-size:.28935185em}.katex .fontsize-ensurer.reset-size9.size2,.katex .sizing.reset-size9.size2{font-size:.34722222em}.katex .fontsize-ensurer.reset-size9.size3,.katex .sizing.reset-size9.size3{font-size:.40509259em}.katex .fontsize-ensurer.reset-size9.size4,.katex .sizing.reset-size9.size4{font-size:.46296296em}.katex .fontsize-ensurer.reset-size9.size5,.katex .sizing.reset-size9.size5{font-size:.52083333em}.katex .fontsize-ensurer.reset-size9.size6,.katex .sizing.reset-size9.size6{font-size:.5787037em}.katex .fontsize-ensurer.reset-size9.size7,.katex .sizing.reset-size9.size7{font-size:.69444444em}.katex .fontsize-ensurer.reset-size9.size8,.katex .sizing.reset-size9.size8{font-size:.83333333em}.katex .fontsize-ensurer.reset-size9.size9,.katex .sizing.reset-size9.size9{font-size:1em}.katex .fontsize-ensurer.reset-size9.size10,.katex .sizing.reset-size9.size10{font-size:1.20023148em}.katex .fontsize-ensurer.reset-size9.size11,.katex .sizing.reset-size9.size11{font-size:1.43981481em}.katex .fontsize-ensurer.reset-size10.size1,.katex .sizing.reset-size10.size1{font-size:.24108004em}.katex .fontsize-ensurer.reset-size10.size2,.katex .sizing.reset-size10.size2{font-size:.28929605em}.katex .fontsize-ensurer.reset-size10.size3,.katex .sizing.reset-size10.size3{font-size:.33751205em}.katex .fontsize-ensurer.reset-size10.size4,.katex .sizing.reset-size10.size4{font-size:.38572806em}.katex .fontsize-ensurer.reset-size10.size5,.katex .sizing.reset-size10.size5{font-size:.43394407em}.katex .fontsize-ensurer.reset-size10.size6,.katex .sizing.reset-size10.size6{font-size:.48216008em}.katex .fontsize-ensurer.reset-size10.size7,.katex .sizing.reset-size10.size7{font-size:.57859209em}.katex .fontsize-ensurer.reset-size10.size8,.katex .sizing.reset-size10.size8{font-size:.69431051em}.katex .fontsize-ensurer.reset-size10.size9,.katex .sizing.reset-size10.size9{font-size:.83317261em}.katex .fontsize-ensurer.reset-size10.size10,.katex .sizing.reset-size10.size10{font-size:1em}.katex .fontsize-ensurer.reset-size10.size11,.katex .sizing.reset-size10.size11{font-size:1.19961427em}.katex .fontsize-ensurer.reset-size11.size1,.katex .sizing.reset-size11.size1{font-size:.20096463em}.katex .fontsize-ensurer.reset-size11.size2,.katex .sizing.reset-size11.size2{font-size:.24115756em}.katex .fontsize-ensurer.reset-size11.size3,.katex .sizing.reset-size11.size3{font-size:.28135048em}.katex .fontsize-ensurer.reset-size11.size4,.katex .sizing.reset-size11.size4{font-size:.32154341em}.katex .fontsize-ensurer.reset-size11.size5,.katex .sizing.reset-size11.size5{font-size:.36173633em}.katex .fontsize-ensurer.reset-size11.size6,.katex .sizing.reset-size11.size6{font-size:.40192926em}.katex .fontsize-ensurer.reset-size11.size7,.katex .sizing.reset-size11.size7{font-size:.48231511em}.katex .fontsize-ensurer.reset-size11.size8,.katex .sizing.reset-size11.size8{font-size:.57877814em}.katex .fontsize-ensurer.reset-size11.size9,.katex .sizing.reset-size11.size9{font-size:.69453376em}.katex .fontsize-ensurer.reset-size11.size10,.katex .sizing.reset-size11.size10{font-size:.83360129em}.katex .fontsize-ensurer.reset-size11.size11,.katex .sizing.reset-size11.size11{font-size:1em}.katex .delimsizing.size1{font-family:KaTeX_Size1}.katex .delimsizing.size2{font-family:KaTeX_Size2}.katex .delimsizing.size3{font-family:KaTeX_Size3}.katex .delimsizing.size4{font-family:KaTeX_Size4}.katex .delimsizing.mult .delim-size1>span{font-family:KaTeX_Size1}.katex .delimsizing.mult .delim-size4>span{font-family:KaTeX_Size4}.katex .nulldelimiter{display:inline-block;width:.12em}.katex .delimcenter,.katex .op-symbol{position:relative}.katex .op-symbol.small-op{font-family:KaTeX_Size1}.katex .op-symbol.large-op{font-family:KaTeX_Size2}.katex .accent>.vlist-t,.katex .op-limits>.vlist-t{text-align:center}.katex .accent .accent-body{position:relative}.katex .accent .accent-body:not(.accent-full){width:0}.katex .overlay{display:block}.katex .mtable .vertical-separator{display:inline-block;min-width:1px}.katex .mtable .arraycolsep{display:inline-block}.katex .mtable .col-align-c>.vlist-t{text-align:center}.katex .mtable .col-align-l>.vlist-t{text-align:left}.katex .mtable .col-align-r>.vlist-t{text-align:right}.katex .svg-align{text-align:left}.katex svg{fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;display:block;height:inherit;position:absolute;width:100%}.katex svg path{stroke:none}.katex img{border-style:none;max-height:none;max-width:none;min-height:0;min-width:0}.katex .stretchy{display:block;overflow:hidden;position:relative;width:100%}.katex .stretchy:after,.katex .stretchy:before{content:""}.katex .hide-tail{overflow:hidden;position:relative;width:100%}.katex .halfarrow-left{left:0;overflow:hidden;position:absolute;width:50.2%}.katex .halfarrow-right{overflow:hidden;position:absolute;right:0;width:50.2%}.katex .brace-left{left:0;overflow:hidden;position:absolute;width:25.1%}.katex .brace-center{left:25%;overflow:hidden;position:absolute;width:50%}.katex .brace-right{overflow:hidden;position:absolute;right:0;width:25.1%}.katex .x-arrow-pad{padding:0 .5em}.katex .cd-arrow-pad{padding:0 .55556em 0 .27778em}.katex .mover,.katex .munder,.katex .x-arrow{text-align:center}.katex .boxpad{padding:0 .3em}.katex .fbox,.katex .fcolorbox{border:.04em solid;box-sizing:border-box}.katex .cancel-pad{padding:0 .2em}.katex .cancel-lap{margin-left:-.2em;margin-right:-.2em}.katex .sout{border-bottom-style:solid;border-bottom-width:.08em}.katex .angl{border-right:.049em solid;border-top:.049em solid;box-sizing:border-box;margin-right:.03889em}.katex .anglpad{padding:0 .03889em}.katex .eqn-num:before{content:"(" counter(katexEqnNo) ")";counter-increment:katexEqnNo}.katex .mml-eqn-num:before{content:"(" counter(mmlEqnNo) ")";counter-increment:mmlEqnNo}.katex .mtr-glue{width:50%}.katex .cd-vert-arrow{display:inline-block;position:relative}.katex .cd-label-left{display:inline-block;position:absolute;right:calc(50% + .3em);text-align:left}.katex .cd-label-right{display:inline-block;left:calc(50% + .3em);position:absolute;text-align:right}.katex-display{display:block;margin:1em 0;text-align:center}.katex-display>.katex{display:block;text-align:center;white-space:nowrap}.katex-display>.katex>.katex-html{display:block;position:relative}.katex-display>.katex>.katex-html>.tag{position:absolute;right:0}.katex-display.leqno>.katex>.katex-html>.tag{left:0;right:auto}.katex-display.fleqn>.katex{padding-left:2em;text-align:left}body{counter-reset:katexEqnNo mmlEqnNo}

/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.katex-error {
	color: var(--vscode-editorError-foreground);
}

</style>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
<link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        
    </head>
    <body class="vscode-body vscode-light">
        <h1 id="contanisering-av-applikationer-christopher-ek">Contanisering av applikationer (Christopher Ek)</h1>
<p>PS: You need to sign up for Github CoPilot, it makes coding 5x faster I promise</p>
<ul>
<li><a href="#contanisering-av-applikationer-christopher-ek">Contanisering av applikationer (Christopher Ek)</a>
<ul>
<li><a href="#uppgift-1"><strong>Uppgift 1</strong></a></li>
<li><a href="#uppgift-2"><strong>Uppgift 2</strong></a></li>
<li><a href="#uppgift-3"><strong>Uppgift 3</strong></a></li>
<li><a href="#uppgift-4"><strong>Uppgift 4</strong></a></li>
<li><a href="#uppgift-5"><strong>Uppgift 5</strong></a></li>
<li><a href="#uppgift-6"><strong>Uppgift 6</strong></a></li>
<li><a href="#uppgift-7"><strong>Uppgift 7</strong></a></li>
<li><a href="#uppgift-8"><strong>Uppgift 8</strong></a></li>
<li><a href="#uppgift-9"><strong>Uppgift 9</strong></a></li>
<li><a href="#uppgift-10"><strong>Uppgift 10</strong></a></li>
<li><a href="#uppgift-11"><strong>Uppgift 11</strong></a></li>
</ul>
</li>
</ul>
<h2 id="uppgift-1"><strong>Uppgift 1</strong></h2>
<p><strong>A</strong>. True</p>
<p><strong>B</strong>. False</p>
<p><strong>C</strong>. False</p>
<p><strong>D</strong>. True</p>
<p><strong>E</strong>. False</p>
<p><strong>F</strong>. False</p>
<p>Container: #contanisering-av-applikationer-christopher-ek</p>
<h2 id="uppgift-2"><strong>Uppgift 2</strong></h2>
<p><code>Dockerfile</code> är en YAML fil som används för att definera hur en docker image ska sättas ihop (defines how the docker image should be assembled/forged in the fire) medans <code>⁠docker-compose.yml</code> är till för att bestäma hur docker container ska köras. t.ex vilka portar som ska vara aktiva, vilka nätverk de ska tillhöra och namn samt image/build, det finns lite mer paramterar här som environment, depends_on, labels, deploy och sen har vi resource management (jag tar upp det här lite extra eftersom jag inte riktigt visade det under min presentation)</p>
<pre><code class="language-yml"><div><span class="hljs-comment"># Code is from docker docs</span>
<span class="hljs-attr">version:</span> <span class="hljs-string">&quot;3.9&quot;</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">redis:alpine</span>
    <span class="hljs-attr">deploy:</span>
      <span class="hljs-attr">resources:</span> <span class="hljs-comment"># here we have resource management</span>
        <span class="hljs-attr">limits:</span>
          <span class="hljs-attr">cpus:</span> <span class="hljs-string">&#x27;0.50&#x27;</span> <span class="hljs-comment"># we set 50% of cpu resources of a single core (cost, energy, heat)</span>
          <span class="hljs-attr">memory:</span> <span class="hljs-string">50M</span>
        <span class="hljs-attr">reservations:</span> <span class="hljs-comment"># here we have cpu time reserverd (like scheduling) (priority)</span>
          <span class="hljs-attr">cpus:</span> <span class="hljs-string">&#x27;0.25&#x27;</span>
          <span class="hljs-attr">memory:</span> <span class="hljs-string">20M</span>


</div></code></pre>
<p>Dockerfile is for one container, docker-compose.yml is for multiple containers.</p>
<h2 id="uppgift-3"><strong>Uppgift 3</strong></h2>
<p>A.
to create a presistance volume, you would have to use a seperate volume that is outside the container. with <code>⁠Dockerfile</code> one would use the command <code>VOLUME /usr/src/app</code> this would only tell where inside the docker container the volume would be inside the container, we use</p>
<p><code>-v &quot;$(pwd)/www&quot;:/usr/share/nginx/html (get current workdir on host, and cd to www, make that mount point)</code> if you don’t tell where the mount point is docker would choose something, honestly I don’t really know where, didnt have time to figure that one out. We can alkso use :ro to make it read only. <code>⁠also docker run -v host_data:container_data</code> I know there is also something for mountain volumes from other containers but not really sure, more investigation is required, please hold...</p>
<p>Volumes can be created with <code>⁠docker volume create/inspect/rm volume_name*</code> 
<code>⁠docker-compose.yml</code> we use the tag <code>volumes:</code></p>
<pre><code class="language-yml"><div><span class="hljs-comment"># Code from Docker docs </span>
<span class="hljs-attr">version:</span> <span class="hljs-string">&quot;3.9&quot;</span> <span class="hljs-comment"># verison of the docker compose file.</span>

<span class="hljs-attr">services:</span> <span class="hljs-comment"># this defines all the containerst that the docker compose file contains</span>

  <span class="hljs-attr">frontend:</span> <span class="hljs-comment"># container name</span>

    <span class="hljs-attr">image:</span> <span class="hljs-string">node:lts</span> <span class="hljs-comment"># container image</span>

    <span class="hljs-attr">volumes:</span> <span class="hljs-comment"># persistance volume code from stackoverflow</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">volume</span> <span class="hljs-comment"># what type </span>
        <span class="hljs-attr">source:</span> <span class="hljs-string">myapp</span> <span class="hljs-comment"># source, like below myapp</span>
        <span class="hljs-attr">target:</span> <span class="hljs-string">/src/app</span> <span class="hljs-comment"># target inside of docker container</span>
        <span class="hljs-attr">read_only:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># make it read only</span>

    <span class="hljs-attr">volumes:</span> <span class="hljs-comment"># ofc you cant have two volumes tags, but this is only for show.</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/path/on/host:/path/inside/container:ro</span> <span class="hljs-comment"># host_data:container_data make it read only</span>

<span class="hljs-comment"># defines a volume name on the host computer, </span>
<span class="hljs-comment"># can be found easily in docker desktop</span>
<span class="hljs-attr">volumes:</span> 
  <span class="hljs-attr">myapp:</span> <span class="hljs-comment"># volume name</span>
</div></code></pre>
<p>B.
Well i think my A answer kinda killed two birds with one stone, i kinda show how to implement volumes in docker compose and dockerfile above.</p>
<h2 id="uppgift-4"><strong>Uppgift 4</strong></h2>
<pre><code class="language-Dockerfile"><div><span class="hljs-keyword">FROM</span> python <span class="hljs-comment"># default</span>
<span class="hljs-keyword">FROM</span> python:<span class="hljs-number">3.10</span>-slim <span class="hljs-comment"># changed</span>
</div></code></pre>
<p>So what is the diffrence between these two?</p>
<p>Not specificing any versio, like <code>⁠FROM python</code> will use the latest version.</p>
<p>If you only specifiy the first digit of the version like <code>⁠FROM python:3</code> you only get the latest of version of python 3.X. <code>⁠FROM python:3.10</code> is static and will always be python 3.10</p>
<p>Well the python image is of cource built ontop of some linux kernel and most like even a distro like alpine, and <code>⁠FROM python:3.10-slim</code> focusing on the slim part, that just says that we wanna use the slim version of alpine to built python ontop, we dont dont need unnecessary bloat.</p>
<h2 id="uppgift-5"><strong>Uppgift 5</strong></h2>
<p>A.
This one is a doosie..</p>
<p><strong>1</strong>. First of all segmentation is very imporant, that why two application that shares nothing should never be on the same network, and should be aware of each other. It’s always best to use routers and request handlers to manage traffic on the network, like with traefik or some custom code. This could be accomplished with dockers, networking protocols. So we assign apps to certain networks using the <code>⁠docker-compose</code> tag networks:</p>
<p><strong>2</strong>. There is something called the CIA Traid, (Confidentiality, Integrity, Availability)</p>
<p><strong>Confidentiality</strong>:
Protection of data from unauth access and misuse. This step is very important when it comes to data security. We can use The Bell LaPadula Principle to protect data from unauth access and misuse.</p>
<p>Like displayed here
<a href="https://imgur.com/a/iL2e2Em">Model</a> (IMGUR)</p>
<p>TLDR: Can read down, can't read up. Which means you can only access the data on in the layer below you. This is just like access levels. run applications as restricted users. This can be achived with <code>docker.cli --user 1000:1000 (runs as given user)</code> With Docker-compose we can just use the command</p>
<pre><code class="language-Dockerfile"><div>  <span class="hljs-keyword">user</span>: ${<span class="hljs-keyword">USER</span>}
</div></code></pre>
<p><strong>3</strong>. certificates, rsa, digital signatures (public-keys &amp; private-keys asymmetric) are used to verify the authenticity of data. So lets say we have a docker image called &quot;Flask-3.10&quot; and we want to run it as a flask app, we need to make sure that the image is signed by a trusted authority, the creators of the flask app, takes their private key and signs the image, so now you can check with their public key if the image is signed by the person that you think it is. so the Flask-3.10 will only have 1 public key. It's like the opposite of encryption but not decryption. We can do this with</p>
<pre><code class="language-Dockerfile"><div><span class="hljs-comment"># Generate a key pair</span>
docker trust key generate Christopher

<span class="hljs-comment"># Adding me as a trusted authority</span>
docker trust signer <span class="hljs-keyword">add</span><span class="bash"> --ky cert.pem Christopher christopherek/school-api:latest</span>

<span class="hljs-comment"># Signs the image and pushes to dockerhub</span>
docker trust sign christopherek/school-api:latest
</div></code></pre>
<p>B.
I think i covered that above, but I can do a rundown again.</p>
<p><strong>1</strong>. Network. This will limit the reach of the infected container. Which limits the access scope. this helps inside app to determeine access scope, and also all applications on that server is isolated. I watched the Docker-con 17 video and it didnt really lifke isolation, but i dont think he means like this. This is very good i would say.</p>
<p><strong>2</strong>. Access levels, we dont have to use root in all containers we can create users instead with restricted access instead. This makes it so the container dosent have as much reach, since its only a user not admin or sudo.</p>
<p><strong>3</strong>. Certificates, this is used to verify the authenticity of data. We use this to simply verify that the container isnt from a shady actor, it could still be infected but its less likely, which helps the internal and external equal.</p>
<h2 id="uppgift-6"><strong>Uppgift 6</strong></h2>
<p><em>Out of Memory Exception</em></p>
<p>Here we can just use <code>-m or --memory=500</code> for cli and for <code>docker-compose</code></p>
<pre><code class="language-yml"><div><span class="hljs-attr">resources:</span> <span class="hljs-comment"># here we have resource management</span>
  <span class="hljs-attr">limits:</span>
    <span class="hljs-attr">memory:</span> <span class="hljs-string">500M</span> <span class="hljs-comment"># &#x27;here we can limit the memory</span>
</div></code></pre>
<p>To not get OOM we can use the command <code>--oom-kill-disable</code> this will make it so we don't kill the kernel when the container is trying to access more memory then it has. keep in mind that memory limits must be set or the container will fail eventually.</p>
<p>We could keep OOM-kill on, and just set the tag <code>restart: always</code> or <code>restart: on-failure</code> to keep the scope down. OOM is an error so this should work.</p>
<p>Here I would also maybe implement a the dockerfile ref  <code>HEALTHCHECK</code> to keep track of the container,  so it dosent impact other containers to much.</p>
<h2 id="uppgift-7"><strong>Uppgift 7</strong></h2>
<p><em>Can image on dockerhub be trusted...</em></p>
<p>A.
No.</p>
<p>B.
Because everyone can upload something to docker hub, and therefor we can't always trust the data. If a docker-image is from a verified source, you see a blue checkmark that says <code>Verified Publisher</code> but you also have official docker image, which are labeled <code>Official Image</code>, this can be trusted to come from the correct source, but that source could still be infected. Official images can be trusted, but could still be infected from third party.</p>
<h2 id="uppgift-8"><strong>Uppgift 8</strong></h2>
<p><em>sudo or no sudo</em>
A.</p>
<p>Consequence</p>
<ol>
<li>Full data loss</li>
<li>Personal Information leak</li>
<li>Full scale data breach</li>
</ol>
<p>B.
Well we downgrade the container user, to something less privileged. Will remove scale down the potentaial data loss. The database server might not need to root, because of someone gets <code>RCE</code> with <code>full shell-access</code> it cant delete folders that are owned by some other user/group policy, so you can't delete the database, unless you contact the database via the API for example.</p>
<h2 id="uppgift-9"><strong>Uppgift 9</strong></h2>
<p>| <em>docker-compose inspect?</em></p>
<p><code>docker-compose</code> is used to define and control multiple containers. One docker-compose file could be used to create a full-stack web application.
and the other one for a full-stack phone application.</p>
<p>With docker-compose we can simply define memory, ports, networks, resources, and volumes etc. We define how they should be run but not how the images could be assembled.</p>
<h2 id="uppgift-10"><strong>Uppgift 10</strong></h2>
<p>| <em>isolation</em></p>
<p>Well to be fair i think i've covered that in the previous questions but, its good to keep things isolated to control the scope for all containers. Limit networks, remove exposed ports use the same volume but for different use-cases.</p>
<h2 id="uppgift-11"><strong>Uppgift 11</strong></h2>
<p>| <em>layers?</em></p>
<pre><code class="language-Dockerfile"><div><span class="hljs-comment"># Question</span>
<span class="hljs-comment"># Vad hade du kunnat göra för att optimera och förbättra denna Dockerfile mer? Beskriv vilka förändringar du skulle göra och motivera varför.</span>

<span class="hljs-keyword">FROM</span> python:<span class="hljs-number">3.10</span> <span class="hljs-comment"># use exact version to avoid issues</span>
<span class="hljs-comment"># Remember to update this for every build</span>
<span class="hljs-keyword">LABEL</span><span class="bash"> version=<span class="hljs-string">&quot;23.2&quot;</span></span>
<span class="hljs-keyword">WORKDIR</span><span class="bash"> /</span>
<span class="hljs-keyword">COPY</span><span class="bash"> app/* .</span>

<span class="hljs-keyword">RUN</span><span class="bash"> pip install fastapi</span>
<span class="hljs-keyword">RUN</span><span class="bash"> pip install uvicorn</span>
<span class="hljs-keyword">RUN</span><span class="bash"> pip install pydantic</span>
<span class="hljs-keyword">RUN</span><span class="bash"> pip install -r requirements.txt</span>

<span class="hljs-keyword">RUN</span><span class="bash"> apt-get update</span>
<span class="hljs-keyword">LABEL</span><span class="bash"> description=<span class="hljs-string">&quot;&quot;</span></span>
<span class="hljs-keyword">RUN</span><span class="bash"> apt-get install nano vim</span>

<span class="hljs-keyword">ARG</span> PORT=<span class="hljs-number">8000</span>
<span class="hljs-keyword">ENV</span> PORT=$PORT
<span class="hljs-keyword">EXPOSE</span> $PORT
<span class="hljs-keyword">LABEL</span><span class="bash"> maintainers=<span class="hljs-string">&quot;The Knights who say Ni!&quot;</span></span>

<span class="hljs-keyword">WORKDIR</span><span class="bash"> /scripts</span>
<span class="hljs-keyword">CMD</span><span class="bash"> /scripts/start-server.sh</span>
</div></code></pre>
<ol>
<li>Change <code>python to python:3.10-slim</code> to use exact version, this ensures that our container will always work, and wont be affected by updates. Also added slim for less resources. I have answerd this in the previous question.</li>
</ol>
<pre><code class="language-Dockerfile"><div><span class="hljs-comment"># old </span>
<span class="hljs-keyword">FROM</span> python

<span class="hljs-comment"># new </span>
<span class="hljs-keyword">FROM</span> python:<span class="hljs-number">3.10</span>-slim
</div></code></pre>
<ol start="2">
<li>Well since all statements that interact with the container will create a new layer. So thats why we wanna set the ARG and Label at the top of the Dockerfile. So when we runt the first statement that interact with the container, those ARG and labels will be cached in the layer.</li>
</ol>
<pre><code class="language-Dockerfile"><div><span class="hljs-comment"># Args</span>
<span class="hljs-keyword">ARG</span> SERVER_FILE=<span class="hljs-string">&quot;main.py&quot;</span>
<span class="hljs-keyword">ARG</span> <span class="hljs-keyword">MAINTAINER</span>=<span class="hljs-string">&quot;Christopher Ek&quot;</span>
<span class="hljs-keyword">ARG</span> AUTHOR=<span class="hljs-string">&quot;Christopher Ek&quot;</span>
<span class="hljs-keyword">ARG</span> PORT_LISTEN=<span class="hljs-string">&quot;8000&quot;</span>
 
<span class="hljs-comment"># env </span>
<span class="hljs-keyword">ENV</span> FILE=$SERVER_FILE


<span class="hljs-comment"># Labels</span>
<span class="hljs-keyword">LABEL</span><span class="bash"> author=<span class="hljs-variable">$AUTHOR</span></span>
<span class="hljs-keyword">LABEL</span><span class="bash"> maintainer=<span class="hljs-variable">$MAINTAINER</span></span>
<span class="hljs-keyword">LABEL</span><span class="bash"> version=<span class="hljs-string">&quot;0.1&quot;</span></span>
<span class="hljs-keyword">LABEL</span><span class="bash"> desc=<span class="hljs-string">&quot;Lorem ipsum&quot;</span></span>

<span class="hljs-keyword">WORKDIR</span><span class="bash"> /app</span>

<span class="hljs-keyword">COPY</span><span class="bash"> * . <span class="hljs-comment"># copy all files in the directory</span></span>

<span class="hljs-comment"># ^ here we create layer one, </span>
<span class="hljs-comment"># so this will be cached if it was successful.</span>
<span class="hljs-comment"># everything ^above^ will be cached in layer 01</span>

</div></code></pre>
<ol>
<li>Copy app/* . is not really correct, alot of margin of error.. Instead we would do this.</li>
</ol>
<pre><code class="language-Dockerfile"><div><span class="hljs-keyword">COPY</span><span class="bash"> <span class="hljs-variable">${pwd}</span>/app/* .</span>
</div></code></pre>
<ol start="4">
<li>I would also set the workdir to /app,  it makes more sense.</li>
</ol>
<pre><code class="language-Dockerfile"><div><span class="hljs-keyword">WORKDIR</span><span class="bash"> /app</span>
</div></code></pre>
<ol start="6">
<li>Use ARG to define label version</li>
</ol>
<pre><code class="language-Dockerfile"><div><span class="hljs-comment"># ARG</span>
<span class="hljs-keyword">ARG</span> VERSION=<span class="hljs-string">&quot;unkown&quot;</span>
<span class="hljs-comment"># LABEL</span>
<span class="hljs-keyword">LABEL</span><span class="bash">=<span class="hljs-variable">$VERSION</span></span>
</div></code></pre>
<ol start="7">
<li>Add libaries to requirements.txt and also use pip freeze and .lock to lock the file.</li>
</ol>
<pre><code class="language-Dockerfile"><div><span class="hljs-comment"># Old</span>
<span class="hljs-keyword">RUN</span><span class="bash"> pip install fastapi</span>
<span class="hljs-keyword">RUN</span><span class="bash"> pip install uvicorn</span>
<span class="hljs-keyword">RUN</span><span class="bash"> pip install pydantic</span>
<span class="hljs-keyword">RUN</span><span class="bash"> pip install -r requirements.txt</span>

<span class="hljs-comment"># new</span>
<span class="hljs-keyword">COPY</span><span class="bash"> requirements.lock .</span>
<span class="hljs-keyword">RUN</span><span class="bash"> pip install -r requirements.lock</span>
</div></code></pre>
<ol start="8">
<li>Multi-stage build</li>
</ol>
<p>The purpose using multi-stage builds is to safe on resources, like having stage 1 be compiling and stage 2 be running, and only copy the exe file. It creates a very nice boundary between production and development, since production is always the exe running and development has all files. This is good segmentation, and lowers the risk of accidental damage to the production build.</p>
<p>Remove EXPOSE &amp; PORT, let docker-compose do the work.</p>
<p><em>Don't judge me to hard im writing from scratch concept</em></p>
<pre><code class="language-Dockerfile"><div><span class="hljs-comment">### -------- ###</span>
<span class="hljs-comment"># -- MULTI --- #</span>
<span class="hljs-comment"># -- STAGE --- #</span>
<span class="hljs-comment"># -- BUILD --- #</span>
<span class="hljs-comment">### -------- ###</span>
<span class="hljs-comment"># Author: Christopher Ek</span>
<span class="hljs-comment"># Version: 1.12.1</span>


<span class="hljs-comment">### -------------------------------  STAGE 1  -------------------------------------- ###</span>
<span class="hljs-keyword">FROM</span> python:<span class="hljs-number">3.10</span>-slim as builder 

<span class="hljs-keyword">ARG</span> <span class="hljs-keyword">MAINTAINER</span>=<span class="hljs-string">&quot;Christopher Ek&quot;</span>
<span class="hljs-keyword">ARG</span> Version=<span class="hljs-string">&quot;23.2&quot;</span>
<span class="hljs-keyword">ARG</span> PORT=<span class="hljs-string">&quot;5000&quot;</span>
<span class="hljs-comment"># Make is permanent sort of.</span>
<span class="hljs-keyword">ENV</span> PORT=$PORT

<span class="hljs-keyword">LABEL</span><span class="bash"> Description=<span class="hljs-string">&quot;&quot;</span></span>
<span class="hljs-keyword">LABEL</span><span class="bash"> MAINTAINER=<span class="hljs-string">&quot;<span class="hljs-variable">${MAINTAINER}</span>&quot;</span></span>
<span class="hljs-keyword">LABEL</span><span class="bash"> Version=<span class="hljs-string">&quot;<span class="hljs-variable">${Version}</span>&quot;</span></span>

<span class="hljs-keyword">WORKDIR</span><span class="bash"> /app</span>
<span class="hljs-comment"># Copy and download dependency using go mod.</span>
<span class="hljs-keyword">COPY</span><span class="bash"> requirements.txt .</span>
<span class="hljs-comment"># Layer 01 ^</span>
<span class="hljs-keyword">RUN</span><span class="bash"> pip install -r requirements.txt</span>
<span class="hljs-comment"># Layer 02 ^ also remove req</span>

<span class="hljs-comment"># When that is cached, we copy the rest.</span>
<span class="hljs-keyword">COPY</span><span class="bash"> . .</span>

<span class="hljs-comment"># Create the exe file</span>
<span class="hljs-keyword">RUN</span><span class="bash"> pip install pyinstaller</span>
<span class="hljs-keyword">RUN</span><span class="bash"> pyinstaller --onefile main.py</span>
<span class="hljs-comment">### -------------------------------  STAGE 2  ------------------------------- ###</span>
<span class="hljs-comment"># mini image, to only run the exe file</span>
<span class="hljs-keyword">FROM</span> scratch

<span class="hljs-comment"># Copy from builder or stage 1</span>
<span class="hljs-keyword">COPY</span><span class="bash"> --from=builder [<span class="hljs-string">&quot;/app/dist/main.exe&quot;</span>, <span class="hljs-string">&quot;.&quot;</span>] <span class="hljs-comment"># Copy the executable to the root of the image.</span></span>

<span class="hljs-comment"># get some updates.</span>
<span class="hljs-keyword">RUN</span><span class="bash"> apt-get update</span>

<span class="hljs-comment"># no nano here, </span>
<span class="hljs-comment"># I would remove this line, </span>
<span class="hljs-comment"># because we dont need any editor. </span>
<span class="hljs-comment"># on the container that just runs the exe file.</span>
<span class="hljs-keyword">RUN</span><span class="bash"> apt-get install nvim </span>

<span class="hljs-comment"># run the application</span>
<span class="hljs-keyword">ENTRYPOINT</span><span class="bash"> [ <span class="hljs-string">&quot;./main&quot;</span> ] <span class="hljs-comment"># Run the executable.</span></span>
</div></code></pre>
<p>docker-compose file</p>
<pre><code class="language-yml"><div><span class="hljs-comment"># Instead of using EXPOSE in the Dockerfile, we can use docker-compose. </span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">exe:</span>
    <span class="hljs-attr">build:</span>
      <span class="hljs-attr">context:</span> <span class="hljs-string">.</span>
      <span class="hljs-attr">dockerfile:</span> <span class="hljs-string">Dockerfile</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">exe</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-number">8000</span><span class="hljs-string">:8000</span> <span class="hljs-comment"># host:container</span>
</div></code></pre>

        <script async src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
        
    </body>
    </html>